{% load static %}
<!DOCTYPE html>
<!--[if lt IE 8]>
<html class="no-js lt-ie10 lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie10 lt-ie9"> <![endif]-->
<!--[if IE 9]>
<html class="no-js lt-ie10"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>سبد خرید</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ProteusThemes">

    <!--  Google Fonts  -->
    <link href='http://fonts.googleapis.com/css?family=Pacifico|Open+Sans:400,700,400italic,700italic&amp;subset=latin,latin-ext,greek'
          rel='stylesheet' type='text/css'>

    <!-- Twitter Bootstrap -->
    <link href="{% static 'front/stylesheets/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'front/stylesheets/responsive.css' %}" rel="stylesheet">
    <!-- Slider Revolution -->
    <link rel="stylesheet" href="{% static 'front/js/rs-plugin/css/settings.css' %}" type="text/css"/>
    <!-- jQuery UI -->
    <link rel="stylesheet"
          href="{% static 'front/js/jquery-ui-1.10.3/css/smoothness/jquery-ui-1.10.3.custom.min.css' %}"
          type="text/css"/>
    <!-- PrettyPhoto -->
    <link rel="stylesheet" href="{% static 'front/js/prettyphoto/css/prettyPhoto.css' %}" type="text/css"/>
    <!-- main styles -->

    <link href="{% static 'front/stylesheets/main.css' %}" rel="stylesheet">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>

    <!-- Modernizr -->
    <script src="{% static 'front/js/modernizr.custom.56918.js' %}"></script>

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{% static 'front/images/apple-touch/144.png' %}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{% static 'front/images/apple-touch/114.png' %}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{% static 'front/images/apple-touch/72.png' %}">
    <link rel="apple-touch-icon-precomposed" href="{% static 'front/images/apple-touch/57.png' %}">
    <link rel="shortcut icon" href="{% static 'front/images/apple-touch/57.png' %}">
</head>


<body class=" checkout-page">

<div class="master-wrapper">


    <div class="container">
        <div class="row">

            <!--  ==========  -->
            <!--  = Main content =  -->
            <!--  ==========  -->
            <section class="span12">

                <div class="checkout-container">
                    <div class="row">
                        <div class="span10 offset1">

                            <!--  ==========  -->
                            <!--  = Header =  -->
                            <!--  ==========  -->
                            <header>
                                <div class="row">
                                    <div class="span2">
                                        <a href="/"><img src="{{ settings.logo }}"
                                                         alt="{{ settings.logo_title }}" width="200" height="200"/></a>
                                    </div>
                                    <div class="span6">
                                        <div class="center-align">
                                            <h1><span class="light">بازبینی</span> سبد خرید</h1>
                                        </div>
                                    </div>
                                    <div class="span2">
                                        <div class="right-align">
                                            <img src="{% static 'front/images/buttons/security.jpg' %}"
                                                 alt="Security Sign" width="92" height="65"/>
                                        </div>
                                    </div>
                                </div>
                            </header>

                            <!--  ==========  -->
                            <!--  = Steps =  -->
                            <!--  ==========  -->
                            <div class="checkout-steps">
                                <div class="clearfix">
                                    <div class="step active">
                                        <div class="step-badge">1</div>
                                        سبد خرید
                                    </div>
                                    <div class="step">
                                        <div class="step-badge">3</div>
                                        اطلاعات ارسال
                                    </div>
                                    <div class="step">
                                        <div class="step-badge">2</div>
                                        شیوه پرداخت
                                    </div>
                                    <div class="step">
                                        <div class="step-badge">4</div>
                                        تایید و پرداخت
                                    </div>
                                </div>
                            </div> <!-- /steps -->

                            <!--  ==========  -->
                            <!--  = Selected Items =  -->
                            <!--  ==========  -->

                            {% include 'partials/cart_checkout/carts_lists_partial.html' with user=request.user settings=settings is_carts_list=True %}

                            <hr/>

                            {% if color_id %}
                                <div style="font-size: 15px !important;" class="alert alert-danger text-center">
                                    {{ color_id }}
                                </div>
                            {% endif %}

                            {% if size_id %}
                                <div style="font-size: 15px !important;" class="alert alert-danger text-center">
                                    {{ size_id }}
                                </div>
                            {% endif %}


                            <p class="right-align">
                                در مرحله بعدی شما اطلاعات ارسال را انتخاب خواهید کرد. &nbsp; &nbsp;
                                <a href="{% url 'fill-data' %}" class="btn btn-primary higher bold">ادامه</a>
                            </p>
                        </div>
                    </div>
                </div>


            </section> <!-- /main content -->

        </div>
    </div> <!-- /container -->


</div> <!-- end of master-wrapper -->


<!--  ==========  -->
<!--  = JavaScript =  -->
<!--  ==========  -->

<!--  = FB =  -->

<div id="fb-root"></div>
<script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=126780447403102";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<!--  = jQuery - CDN with local fallback =  -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        document.write('<script src="{% static 'front/js/jquery.min.js' %}"><\/script>');
    }
</script>

<!--  = _ =  -->
<script src="{% static 'front/js/underscore/underscore-min.js' %}" type="text/javascript"></script>

<!--  = Bootstrap =  -->
<script src="{% static 'front/js/bootstrap.min.js' %}" type="text/javascript"></script>

<!--  = Slider Revolution =  -->
<script src="{% static 'front/js/rs-plugin/pluginsources/jquery.themepunch.plugins.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'front/js/rs-plugin/js/jquery.themepunch.revolution.min.js' %}" type="text/javascript"></script>

<!--  = CarouFredSel =  -->
<script src="{% static 'front/js/jquery.carouFredSel-6.2.1-packed.js' %}" type="text/javascript"></script>

<!--  = jQuery UI =  -->
<script src="{% static 'front/js/jquery-ui-1.10.3/js/jquery-ui-1.10.3.custom.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'front/js/jquery-ui-1.10.3/touch-fix.min.js' %}" type="text/javascript"></script>

<!--  = Isotope =  -->
<script src="{% static 'front/js/isotope/jquery.isotope.min.js' %}" type="text/javascript"></script>

<!--  = Tour =  -->
<script src="{% static 'front/js/bootstrap-tour/build/js/bootstrap-tour.min.js' %}" type="text/javascript"></script>

<!--  = PrettyPhoto =  -->
<script src="{% static 'front/js/prettyphoto/js/jquery.prettyPhoto.js' %}" type="text/javascript"></script>

<!--  = Google Maps API =  -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="{% static 'front/js/goMap/js/jquery.gomap-1.3.2.min.js' %}"></script>

<!--  = Custom JS =  -->
<script src="{% static 'front/js/custom.js' %}" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function ChangeCount(new_count, cart_id) {
        const csrftoken = getCookie('csrftoken')

        $.ajax({
            headers: {'X-CSRFToken': csrftoken},
            url: "{% url 'count-change' %}",
            method: "POST",
            data: {'new_count': new_count, 'cart_id': cart_id},
            async: true,
            success: function (data) {
                $("#carts_list").html(data['carts_list_partial'])
            },
        });
    }

    function DeleteFromCarts(cart_id) {
        const csrftoken = getCookie('csrftoken')

        $.ajax({
            headers: {'X-CSRFToken': csrftoken},
            url: "{% url 'cart-delete' %}",
            method: "POST",
            data: {'cart_id': cart_id},
            async: true,
            success: function (data) {

                $("#carts_list").html(data['carts_list_partial'])

                toastr.options = {
                    "showDuration": "400",
                    "positionClass": "toast-bottom-center",
                    "progressBar": true,
                }
                toastr.success(data['detail']);
            },
            error: function (error) {
                const errors = JSON.parse(error.responseText)

                toastr.options = {
                    "showDuration": "400",
                    "positionClass": "toast-bottom-center",
                    "progressBar": true,
                }
                toastr.options.positionClass = 'toast-bottom-center'

                for (const item in errors) {
                    toastr.error(item + ' : ' + errors[item][0])
                    break
                }
            }
        });
    }

</script>

</body>
</html>
    
    